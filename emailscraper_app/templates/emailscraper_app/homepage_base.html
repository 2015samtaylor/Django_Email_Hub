{% extends 'emailscraper_app/base.html' %}
{% load crispy_forms_tags %}

{% block title %}
Email Campaign - Home
{% endblock title %}


{% block content %}
<h1>{{ email_context.welcome_message }}</h1>


<div class = "container">
    <div class="email-config-container">
        <!-- Email configuration form comes from cleansed form created in the email_config_view --> 
        <form action="{% url 'email_config_home' %}" method="post" class="email-configuration-form">
            {% csrf_token %}
            {% for field in email_config_form %}
                {% if field.widget.input_type != 'hidden' %}
                    <p class="form-field">
                        {{ field.label_tag }}<br>
                        {{ field }}
                        {% if field.errors %}
                            <span class="error-message">{{ field.errors }}</span>
                        {% endif %}
                    </p>
                {% endif %}
            {% endfor %}
            <button type="submit" class="save-configuration-button">Save Configuration</button>
        </form> 

        <form action="{% url 'email_send' %}" method="post" class="form-inline">
            {% csrf_token %}
            <button type="submit" class="send-emails-button">Send Emails</button>
        </form>
    </div>


    <!-- Text area for composing emails -->
    <div class="compose-email-container">
        <h2>Compose Email</h2>
            <textarea name="email_content" rows="15" class="wide-textarea" placeholder="Compose your email here"></textarea>
    </div>
</div>
    
{% endblock content %}

{% block footer %}
{% endblock footer %}
